package com.dalilu;

    import android.content.Intent;import android.graphics.Bitmap;import android.os.Bundle;import android.provider.MediaStore;

    import android.util.Base64;import android.view.View;import android.widget.Button;import android.widget.EditText;import android.widget.ImageView;import android.widget.Toast;

    import androidx.annotation.NonNull;import androidx.appcompat.app.AppCompatActivity;import androidx.appcompat.widget.Toolbar;

    import com.dalilu.services.FirebaseManager;import com.dalilu.services.PointOfInterest;import com.google.android.gms.maps.model.LatLng;

    import java.io.ByteArrayOutputStream;

    public class CreatePOIActivity extends AppCompatActivity {

    //Request codeprivate static final int REQUEST_IMAGE_CAPTURE = 256;//Imageview of the pictureprivate ImageView cameraPhotoView;//Image encoded in a stringprivate String encodedImage;//The edit textprivate EditText nameEditText;//The picture that was captured by the user in a bitmapprivate Bitmap picture;

    @Overrideprotected void onSaveInstanceState(@NonNull Bundle outState) {super.onSaveInstanceState(outState);//Save the data on the activity if they have been set by the userif(encodedImage != null) {outState.putString("encodedImage", encodedImage);}if(nameEditText != null && nameEditText.getText().toString() != null && !nameEditText.getText().toString().isEmpty()) {outState.putString("editText", nameEditText.getText().toString());}if(picture != null) {outState.putParcelable("picture", picture);}}

    @Overrideprotected void onCreate(Bundle savedInstanceState) {super.onCreate(savedInstanceState);setContentView(R.layout.activity_create_poi);Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);setSupportActionBar(toolbar);Intent intent = getIntent();LatLng location = (LatLng) intent.getParcelableExtra("location");final double lat = location.latitude;final double lng = location.longitude;

    nameEditText = findViewById(R.id.name_edit_text);Button submitPoiButton = findViewById(R.id.submit_poi_button);Button takePhotoButton = findViewById(R.id.take_photo_button);cameraPhotoView = findViewById(R.id.photo_imageview);

    //Retrieve the saved data if there are setif(savedInstanceState != null) {String savedEncodedImage = savedInstanceState.getString("encodedImage");String savedEditTextString = savedInstanceState.getString("editText");Bitmap savedPicture = savedInstanceState.getParcelable("picture");

    if(savedEncodedImage != null) {encodedImage = savedEncodedImage;}if(savedEditTextString != null) {nameEditText.setText(savedEditTextString);}if(savedPicture != null) {cameraPhotoView.setImageBitmap(savedPicture);picture = savedP